<?xml version="1.0" encoding="UTF-8"?>
<jasperReport name="RelatorioOrdens"
    language="java"
    pageWidth="842" pageHeight="595"
    orientation="Landscape"
    columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

    <!-- Parâmetros -->
    <parameter name="dataInicio" class="java.sql.Date"/>
    <parameter name="dataFim" class="java.sql.Date"/>

    <!-- Consulta SQL -->
    <queryString>
        <![CDATA[
        SELECT os.os, os.data_os, os.equipamento, os.defeito, os.servico,
               os.preco_servico, os.tecnico, os.tipo, os.status,
               clientes.nome, clientes.telefone
        FROM projetoos.os
        INNER JOIN projetoos.clientes ON os.Idcli = clientes.idcli
        WHERE os.data_os BETWEEN $P{dataInicio} AND $P{dataFim}
        ORDER BY os.data_os ASC
        ]]>
    </queryString>

    <!-- Campos -->
    <field name="os" class="java.lang.Integer"/>
    <field name="data_os" class="java.sql.Timestamp"/>
    <field name="equipamento" class="java.lang.String"/>
    <field name="servico" class="java.lang.String"/>
    <field name="nome" class="java.lang.String"/>
    <field name="status" class="java.lang.String"/>

    <!-- TÍTULO -->
    <title>
        <band height="80">
            <staticText>
                <reportElement x="140" y="10" width="600" height="50"/>
                <textElement textAlignment="Center">
                    <font fontName="Arial" size="28" isBold="true"/>
                </textElement>
                <text><![CDATA[RELATÓRIO DE ORDENS DE SERVIÇO]]></text>
            </staticText>
        </band>
    </title>

    <!-- CABEÇALHO -->
    <pageHeader>
        <band height="40">
            <!-- Faixa preta -->
            <rectangle>
                <reportElement x="0" y="0" width="802" height="30" backcolor="#000000" mode="Opaque"/>
            </rectangle>

            <!-- Cabeçalhos de coluna -->
            <staticText>
                <reportElement x="10" y="5" width="50" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[OS]]></text>
            </staticText>

            <staticText>
                <reportElement x="70" y="5" width="120" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[Equipamento]]></text>
            </staticText>

            <staticText>
                <reportElement x="200" y="5" width="160" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[Serviço]]></text>
            </staticText>

            <staticText>
                <reportElement x="370" y="5" width="180" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[Cliente]]></text>
            </staticText>

            <staticText>
                <reportElement x="560" y="5" width="100" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[Status]]></text>
            </staticText>

            <staticText>
                <reportElement x="670" y="5" width="130" height="20" forecolor="#FFFFFF"/>
                <text><![CDATA[Data OS]]></text>
            </staticText>
        </band>
    </pageHeader>

    <!-- DETALHES -->
    <detail>
        <band height="22">
            <textField>
                <reportElement x="10" y="0" width="50" height="20"/>
                <textFieldExpression><![CDATA[$F{os}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="70" y="0" width="120" height="20"/>
                <textFieldExpression><![CDATA[$F{equipamento}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="200" y="0" width="160" height="20"/>
                <textFieldExpression><![CDATA[$F{servico}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="370" y="0" width="180" height="20"/>
                <textFieldExpression><![CDATA[$F{nome}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="560" y="0" width="100" height="20"/>
                <textFieldExpression><![CDATA[$F{status}]]></textFieldExpression>
            </textField>

            <textField pattern="dd/MM/yyyy">
                <reportElement x="670" y="0" width="130" height="20"/>
                <textFieldExpression><![CDATA[$F{data_os}]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <!-- RODAPÉ -->
    <summary>
        <band height="40">
            <textField pattern="dd/MM/yyyy">
                <reportElement x="0" y="10" width="200" height="20"/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="700" y="10" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Página " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </summary>

</jasperReport>
